if isTestable("xmaslights") then
	local tblLights = {
		[1] = { --TEst
			render = {1496, -1694, 15},
			light = {
				{1496, -1694, 16, 0.2, 255, 0, 0},
				{1496, -1694, 17, 0.3, 255, 255, 0},
			},
			state = false --aus
		},
		[2] = { -- Weinachtsbaum
			render = {1477.9381103516, -1665.3728027344, 14.553216934204},
			light = {
				--gelb
				{1492.9055175781, -1665.7724609375, 19.885513305664, 0.5, 200, 175, 0},
				{1484.6270751953, -1657.8060302734, 22.922807693481, 0.5, 200, 175, 0},
				{1478.7709960938, -1655.1166992188, 23.369504928589, 0.5, 200, 175, 0},
				{1467.4521484375, -1660.0653076172, 17.586494445801, 0.5, 200, 175, 0},
				{1467.0047607422, -1670.6873779297, 15.248388290405, 0.5, 200, 175, 0},
				{1479.3666992188, -1680.2410888672, 19.355340957642, 0.5, 200, 175, 0},
				{1488.1187744141, -1671.3790283203, 22.054794311523, 0.5, 200, 175, 0},
				{1478.759765625, -1678.2596435547, 27.844854354858, 0.5, 200, 175, 0},
				{1469.8435058594, -1674.076171875, 30.789962768555, 0.5, 200, 175, 0},
				{1468.6807861328, -1663.1820068359, 29.809391021729, 0.5, 200, 175, 0},
				{1469.8287353516, -1667.1099853516, 39.940887451172, 0.5, 200, 175, 0},
				{1473.9993896484, -1657.7869873047, 36.001651763916, 0.5, 200, 175, 0},
				{1483.0393066406, -1660.1929931641, 39.802463531494, 0.5, 200, 175, 0},
				{1478.8653564453, -1659.5161132813, 47.06517791748, 0.5, 200, 175, 0},
				{1474.9676513672, -1668.3321533203, 52.87047958374, 0.5, 200, 175, 0},
				{1482.4622802734, -1672.3078613281, 48.35485458374, 0.5, 200, 175, 0},
				{1489.7556152344, -1666.1234130859, 32.907516479492, 0.5, 200, 175, 0},
				{1480.4422607422, -1666.8265380859, 58.074298858643, 0.5, 200, 175, 0},
				--rot
				{1484.4304199219, -1678.8931884766, 15.372253417969, 0.5, 200, 0, 0},
				{1491.2768554688, -1666.4643554688, 27.071590423584, 0.5, 200, 0, 0},
				{1485.9835205078, -1654.8210449219, 17.702661514282, 0.5, 200, 0, 0},
				{1472.9686279297, -1656.4301757813, 28.419462203979, 0.5, 200, 0, 0},
				{1470.3110351563, -1661.0767822266, 35.085380554199, 0.5, 200, 0, 0},
				{1475.2548828125, -1659.609375, 41.267936706543, 0.5, 200, 0, 0},
				{1475.2331542969, -1663.9245605469, 54.117641448975, 0.5, 200, 0, 0},
				{1468.8127441406, -1667.0693359375, 35.862239837646, 0.5, 200, 0, 0},
				{1469.2465820313, -1672.0604248047, 27.833137512207, 0.5, 200, 0, 0},
				{1476.8588867188, -1677.1575927734, 30.160629272461, 0.5, 200, 0, 0},
				{1484.3107910156, -1674.6535644531, 22.633243560791, 0.5, 200, 0, 0},
				{1488.6164550781, -1672.0595703125, 35.19702911377, 0.5, 200, 0, 0},
				{1487.2293701172, -1666.4351806641, 39.555488586426, 0.5, 200, 0, 0},
				{1482.5394287109, -1660.5651855469, 48.313369750977, 0.5, 200, 0, 0},
				{1484.8526611328, -1656.6065673828, 26.619491577148, 0.5, 200, 0, 0},
			},
			state = false --aus
		},
	}

	addEvent("xmaslights:onClientRequestLights", true)
	addEventHandler("xmaslights:onClientRequestLights", root, function()
		triggerClientEvent(client, "xmaslights:onClientRecieveLights", resourceRoot, tblLights)
	end)


	function toggleXMASLight(iID, bState)
		if tblLights[iID] and bState ~= tblLights[iID].state then
			tblLights[iID].state = bState
			triggerClientEvent("xmaslights:onLightStateChange", resourceRoot, iID, bState)
		end
	end

	setTimer(function()
		local hour, minute = getTime()
		if hour > 20 or hour < 8 then
			toggleXMASLight(2, true)
		else
			toggleXMASLight(2, false)
		end
	end, 1000, 0)
end
